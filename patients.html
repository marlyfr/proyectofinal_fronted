<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pacientes - Sistema Colas</title>

  <!-- Estilos globales -->
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/forms.css" />
  <link rel="stylesheet" href="styles/tables.css" />

  <style>
    /* üåü Mejoras visuales sin romper tu CSS */
    .panel {
      border-radius: 12px;
      padding: 25px;
      background: #ffffff;
      box-shadow: 0 4px 20px rgba(0,0,0,0.07);
      margin-bottom: 30px;
    }

    .panel-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 20px;
      color: #2c3e50;
    }

    .search-input {
      width: 100%;
      padding: 12px 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 15px;
      font-size: 15px;
    }

    .form-group label {
      font-weight: 600;
      margin-bottom: 6px;
      display: inline-block;
    }

    .form-group input {
      padding: 10px;
      border-radius: 7px;
      border: 1px solid #ccc;
      width: 100%;
      font-size: 15px;
    }

    .btn.primary {
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 8px;
      margin-top: 10px;
    }

    .table td, .table th {
      padding: 12px !important;
      font-size: 15px;
    }

    .table th {
      background: #f0f3f5;
      font-weight: 600;
    }
  </style>
</head>

<body>
  <!-- Topbar -->
  <header class="topbar">
    <div class="brand">
      <img src="assets/logo.png" alt="logo" class="logo-sm"/> 
      <span>Pacientes</span>
    </div>

    <nav>
      <button onclick="location.href='dashboard.html'" class="nav-btn">Dashboard</button>
      <button onclick="location.href='turns.html'" class="nav-btn">Turnos</button>
      <button onclick="Auth.logout()" class="nav-btn danger">Cerrar sesi√≥n</button>
    </nav>
  </header>

  <main class="container">

    <!-- Registrar -->
    <section class="panel">
      <h2 class="panel-title">Registrar nuevo paciente</h2>

      <form id="patientForm">

        <div class="grid-2">
          <div class="form-group">
            <label>DPI</label>
            <input id="dpi" placeholder="Ej: 1234567890123" />
          </div>

          <div class="form-group">
            <label>Nombre completo *</label>
            <input id="nombreCompleto" placeholder="Ej: Juan P√©rez L√≥pez" required />
          </div>
        </div>

        <div class="grid-3">
          <div class="form-group">
            <label>Fecha nacimiento</label>
            <input id="fechaNacimiento" type="date" />
          </div>

          <div class="form-group">
            <label>Tel√©fono</label>
            <input id="telefono" placeholder="Ej: 5555-5555" />
          </div>

          <div class="form-group">
            <label>Correo</label>
            <input id="correo" type="email" placeholder="correo@ejemplo.com" />
          </div>
        </div>

        <div class="form-group">
          <label>Direcci√≥n</label>
          <input id="direccion" placeholder="Ej: Zona 1, Ciudad" />
        </div>

        <button class="btn primary" type="submit">Guardar paciente</button>
        <p id="patientMsg" class="text-success"></p>
      </form>
    </section>

    <!-- Lista -->
    <section class="panel">
      <h2 class="panel-title">Lista de pacientes</h2>

      <input id="searchPatient" class="search-input" placeholder="Buscar por nombre o DPI" />

      <table class="table" id="patientsTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>DPI</th>
            <th>Nombre</th>
            <th>Tel√©fono</th>
            <th>Correo</th>
            <th style="width: 140px;">Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

  </main>

  <!-- Scripts -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/patients.js"></script>

  <script>
    Auth.protectPage();
    Patients.init();
  </script>

</body>
</html>

